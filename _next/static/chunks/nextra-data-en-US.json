{"/avstemming":{"title":"Avstemming","data":{"":"Utsjekk håndterer grensesnittavstemming mot Økonomisystemet internt. Konsumenter trenger ikke å foreta seg noe for at grensesnittavstemming skal\nsettes i gang og gå jevnlig.Ta kontakt med oss dersom dere har behov for annen type avstemming mot Økonomisystemet eller mellom vedtaksløsningen og Utsjekk."}},"/":{"title":"Om tjenesten","data":{"":"Utsjekk tilbyr tjenester innenfor utbetalingsdomenet for arbeidsytelser. Mer spesifikt kan den sende og korrigere utbetalinger, avstemme utbetalinger og gi oppdatert status på tilstanden til en utbetaling.\nSe individuelle sider for dokumentasjon av hver tjeneste.Hensikten med denne siden er å dokumentere konsepter og funksjonelle aspekter ved Utsjekk sine tjenester som ikke kommer tydelig frem i API-dokumentasjonen. Er du ute etter tekniske detaljer rundt endepunktene, se Swagger-dokumentasjonen\nher (krever naisdevice). Videre finnes det kontrakter for alle DTO-er som Utsjekk bruker i sitt API her.\nDe aktuelle kontraktene for iverksetting ligger i artifaktet iverksett. Vi oppfordrer alle konsumenter til å ta i bruk kontraktene.","kontakt#Kontakt":"Utsjekk eies av Team Hel Ved. Vi kan kontaktes på Slack i kanalen #team-hel-ved.","intern-arkitektur#Intern arkitektur":""}},"/kom_i_gang":{"title":"Kom i gang","data":{"oppsett#Oppsett":"For å ta i bruk utsjekk må klient-applikasjonen åpne for trafikk til tjenesten. Legg inn følgende kodesnutt i deres\nnais-konfig:\naccessPolicy:\n  outbound:\n    rules:\n      - application: utsjekk\n        namespace: helved\nTilsvarende må vi åpne for trafikk fra deres klient-applikasjon i utsjekk. Opprett en pull request i utsjekk med følgende kodesnutt i nais-konfig:\naccessPolicy:\n  inbound:\n    rules:\n      - application: [applikasjonsnavn]\n        namespace: [namespace]\nMerk at disse reglene legger opp til service-til-service-kommunikasjon innenfor samme kubernetes-cluster. Det vil si at\nklient-applikasjonen må bruke utsjekk sin service discovery-url. Bruk en av følgende URL-er:\nhttp://utsjekk.helved\nhttp://utsjekk.helved.svc.cluster.local\nTa kontakt med oss dersom deres klient-applikasjon må bruke ingressen for å kommunisere med utsjekk.","autentisering#Autentisering":"Tjenesten krever Azure token på alle kall, dvs. enten et Client Credentials-token eller et On-Behalf-Of-token.\nLes mer om autentisering i nais-dokumentasjonen.","api-dokumentasjon-og-kontrakter-for-dto-klasser#API-dokumentasjon og kontrakter for DTO-klasser":"utsjekk har swagger-dokumentasjon her.Vi har samlet alle DTO-ene som brukes av API-et i et bibliotek. Se utsjekk-kontrakter på github\nog bruk pakken iverksett."}},"/status":{"title":"Status på utbetaling","data":{"":"Status på utbetalinger er en av følgende verdier:\nStatus\tBeskrivelse\tIKKE_PÅBEGYNT\tIkke sendt til økonomisystemet\tSENDT_TIL_OPPDRAG\tSendt til økonomisystemet, venter på svar\tFEILET_MOT_OPPDRAG\tFeilkvittering fra økonomisystemet. Kan være enten teknisk eller funksjonell feil.\tOK\tKvittert OK fra økonomisystemet og ferdigstilt.\tOK_UTEN_UTBETALING\tFerdigstilt uten å ha blitt sendt til økonomisystemet pga. at det ikke er noe å utbetale","med-rest#Med REST":"GET /{sakId}/{behandlingId}/status\nGET /{sakId}/{behandlingId}/{iverksettingId}/status\nHenter status på utbetaling. Dette endepunktet kan brukes for å sjekke tilstanden til en utbetaling som er tatt i mot og\nvalidert av utsjekk. NAVs økonomisystem har en asynkron integrasjon og er i tillegg et stormaskinsystem som har definerte\noppetider. Økonomisystemet er stengt i helger, helligdager og mellom kl 21 og kl 6 på virkedager. Derfor kan det\nta lang tid før en utbetaling blir kvittert ut fra økonomisystemet avhengig av når den er sendt inn.Dersom utsjekk finner behandlingen, vil endepunktet svare med 200 OK og utbetalingsstatus.","med-kafka#Med Kafka":"Vi har satt opp en topic hvor vi tilbyr statusendringer på utbetalinger: helved.iverksetting-status-v1. Om dette\ner interessant for dere kan dere kontakte oss så vi får gitt appen deres tilgang til topicen. I tillegg må følgende finnes\ni nais-konfigen deres:\nspec:\n  kafka:\n    pool: nav-prod # Eller nav-dev for dev-miljø\nMeldinger som publiseres her bruker personident som nøkkel og har følgende format på meldingen:\ndata class StatusEndretMelding(\n    val sakId: String,\n    val behandlingId: String,\n    val iverksettingId: String?,\n    val fagsystem: Fagsystem,\n    val status: IverksettStatus,\n)\nDataklassen finner du i utsjekk-kontrakter om du ønsker å bruke den direkte."}},"/utbetaling/FAQ":{"title":"FAQ","data":{"når-må-jeg-dele-opp-utbetalingen-i-flere-perioder#Når må jeg dele opp utbetalingen i flere perioder?":"Dersom beløpet eller stønadstypen\nendrer seg eller brukeren har dager i perioden uten utbetaling (eksempelvis helg), må det opprettes ny periode.Eksempler\nEksempel 1: Endring i beløp\nBruker skal ha utbetaling mandag-fredag med 500kr/dag tom onsdag og 400kr/dag fom torsdag. Det representeres med følgende utbetalingsperioder:\n[\n  {\n      \"beløp\": 500,\n      \"satstype\": \"DAGLIG\",\n      \"fraOgMed\": \"2023-11-13\",\n      \"tilOgMed\": \"2023-11-15\"\n  },\n  {\n      \"beløp\": 400,\n      \"satstype\": \"DAGLIG\",\n      \"fraOgMed\": \"2023-11-16\",\n      \"tilOgMed\": \"2023-11-17\"\n  }\n]\nEksempel 2: Utbetaling med samme beløp for en 14-dagers periode\nBruker skal ha 500kr/dag for 14 dager, med unntak av helger. Det representeres med følgende utbetalingsperioder:\n[\n  {\n      \"beløp\": 500,\n      \"satstype\": \"DAGLIG\",\n      \"fraOgMed\": \"2023-11-13\",\n      \"tilOgMed\": \"2023-11-17\"\n  },\n  {\n      \"beløp\": 500,\n      \"satstype\": \"DAGLIG\",\n      \"fraOgMed\": \"2023-11-20\",\n      \"tilOgMed\": \"2023-11-24\"\n  }\n]","kan-jeg-sende-total-brutto-utbetaling-for-hele-meldepliktsperioden#Kan jeg sende total brutto utbetaling for hele meldepliktsperioden?":"Utsjekk må ha beløp per dag for meldepliktsytelser uavhengig av hvordan vedtaksløsningen representerer utbetalingene\ninternt. Dette kommer av føringer fra NAVs økonomisystem. Dersom din vedtaksløsning feks. representerer utbetalingen som et\ntotalbeløp for en 14-dagers periode, må dere på konsumentsiden fordele dette totalbeløpet på dagsbeløp slik dere ser det hensiktsmessig.","ansvarsfordeling#Ansvarsfordeling":"","hva-har-konsumentene-selv-ansvar-for#Hva har konsumentene selv ansvar for":"","totrinnskontroll#Totrinnskontroll":"Utsjekk gjør ingen validering på feltene for saksbehandlerId og beslutterId. Konsumentene har selv ansvaret for å vurdere om det skal gjennomføres totrinnskontroll og at den gjøres korrekt. Disse feltene skal fylles ut på grunn av sporing i økonomisystemet. Utsjekk sender bare disse dataene videre.Les mer om totrinnskontroll i etterlevelsesløsningen.","dataene-som-sendes-til-utsjekk-er-korrekt#Dataene som sendes til Utsjekk er korrekt":"Konsumentene har ansvar for at dataene som sendes inn til utsjekk er korrekt og i henhold til ytelsens regelverk.Utsjekk vet for eksempel ikke noe om, og gjør ingen validering på, størrelse på beløp. Eksempel: Dagpenger har selv ansvar for at beløp som sendes inn til Utsjekk ikke er større enn tillatt maksbeløp, i henhold til dagpengeregelverket.Dersom vedtaksløsningen har iverksatt noe som er feil og som må korrigeres, så er det vedtaksløsningen selv som må rette opp i det og iverksette på nytt.","hva-tar-utsjekk-ansvar-for#Hva tar utsjekk ansvar for":"Utsjekk tar ansvar for at en iverksetting, som gir en 202-respons, faktisk sendes videre til økonomisystemet og blir iverksatt. Utsjekk håndterer også kvitteringer og følger opp mot PO utbetaling dersom kvittering uteblir.Konsumenter kan sende iverksettinger til Utsjekk når som helst og helt uavhengig av økonomisystemets åpningstider. Dette er også beskrevet under status på utbetaling.Se siden om iverksetting for hvilke valideringer Utsjekk gjør.Utsjekk tar også ansvar for grensesnittavstemming mot økonomisystemet.","ros-og-etterlevelse-for-utsjekk#ROS og etterlevelse for Utsjekk":"ROS for utsjekk\nEtterlevelsesdokument for Utsjekk"}},"/utbetaling/data_inn/beskrivelse":{"title":"Beskrivelse av felter","data":{"":"➡️: Sendes til OS\n💰: Brukes i iverksetting\n⚙️: Brukes i simulering\nFelt\tMerknad\tBeskrivelse\tsakId\t➡️💰⚙️\tId på saken i vedtaksløsningen. Maks 25 tegn.\tbehandlingId\t➡️💰⚙️\tId på behandlingen i vedtaksløsningen. Maks 30 tegn. Brukes for å spore utbetalingen tilbake til den konkrete hendelsen som trigget den. Kan også være id på vedtak, meldekort etc. DVH bruker denne når de sammenstiller stønadsstatistikk.\tiverksettingId\t💰\tId på iverksettingen. Brukes kun når vedtaksløsningen må iverksette flere ganger for samme behandling/vedtak.\tpersonIdent\t➡️💰⚙️\tNaturlig ident (fødselsnummer eller D-nummer) på personen som skal få utbetalingen. Utsjekk validerer at identen har gyldig format.\tvedtak\t➡️💰⚙️\tSe eget avsnitt\tforrigeIverksetting\t💰⚙️\tIdentifikasjon på forrige iverksetting. Settes kun når det finnes tidligere iverksettinger på saken.","vedtak#Vedtak":"Felt\tMerknad\tBeskrivelse\tvedtakstidspunkt\t➡️💰\tTidspunktet vedtaket ble fattet.\tsaksbehandlerId\t➡️💰⚙️\tEnten NAV-ident på saksbehandler når behandlingen er gjort manuelt, eller navn på system/applikasjon/servicebruker dersom behandlingen er gjort automatisk. Utsjekk gjør ingen validering av dette feltet.\tbeslutterId\t➡️💰\tEnten NAV-ident på beslutter når behandlingen er gjort manuelt, eller navn på system/applikasjon/servicebruker dersom behandlingen er gjort automatisk. Utsjekk gjør ingen validering av dette feltet.\tutbetalinger\t➡️💰⚙️\tListe av utbetalingsperioder. Se eget avsnitt","utbetaling#Utbetaling":"Felt\tMerknad\tBeskrivelse\tbeløp\t➡️💰⚙️\tBrutto beløp i hele kroner iht. satstypen. For dagsats og månedssats blir verdien multiplisert iht. satstypen og perioden for å finne totalbeløpet for utbetalingen. For engangssats er verdien per definisjon totalbeløpet som utbetales.\tsatstype\t➡️💰⚙️\tAvgjør totalbeløpet for utbetalingsperioden. Enten dagsats, månedssats eller engangssats.\tfraOgMedDato\t➡️💰⚙️\tFørste dato for utbetalingsperioden. For månedssats må denne alltid være første dag i måneden.\ttilOgMedDato\t➡️💰⚙️\tSiste dato for utbetalingsperioden. For månedssats må denne alltid være siste dag i måneden.\tstønadsdata\t➡️💰⚙️\tEt sett med ytelsesspesifikke felter for utbetalingen. Se eget avsnitt","stønadsdata#Stønadsdata":"Stønadsdata for dagpenger\nFelt\tMerknad\tBeskrivelse\tstønadstype\t➡️💰⚙️\tRepresenterer rettighetstypene Ordinær arbeidssøker, Permittert, Permittert fra fiskeindustri og EØS.\tferietillegg\t➡️💰⚙️\tSettes når utbetalingen er et ferietillegg. Kan være enten ordinært ferietillegg eller ferietillegg til en avdød person.\t\nStønadsdata for tiltakspenger\nFelt\tMerknad\tBeskrivelse\tstønadstype\t➡️💰⚙️\tRepresenterer tiltakstypen.\tbarnetillegg\t➡️💰⚙️\tSettes til true når utbetalingsperioden gjelder et barnetillegg.\tbrukersNavKontor\t➡️💰⚙️\tEnhetsnummeret på NAV-kontoret som brukeren tilhører. Må være 4-sifret.\t\nStønadsdata for tilleggsstønader\nFelt\tMerknad\tBeskrivelse\tstønadstype\t➡️💰⚙️\tRepresenterer hvilken stønad utbetalingen gjelder samt visse undergrupper innenfor hver stønad.\tbrukersNavKontor\t➡️💰⚙️\tEnhetsnummeret på NAV-kontoret som brukeren tilhører. Må være 4-sifret. Settes kun for reisestønadene."}},"/utbetaling/data_inn/eksempler":{"title":"Eksempeldata","data":{"tilleggsstønader#Tilleggsstønader":"","eksempel-på-iverksetting-av-ny-sak#Eksempel på iverksetting av ny sak":"Gitt en sak med id S-1 og en førstegangsbehandling med id B-1 med engangsutbetaling for mai og juni. Her er hvordan en iverksetting vil se ut:\n{\n    \"sakId\": \"S-1\",\n    \"behandlingId\": \"B-1\",\n    \"iverksettingId\": \"485c17f5-2e11-49d2-b370-51120fec58d1\",\n    \"personident\": \"16418245135\",\n    \"vedtak\": {\n        \"vedtakstidspunkt\": \"2024-06-03T15:24:14\",\n        \"saksbehandlerId\": \"S123456\",\n        \"beslutterId\": \"B123456\",\n        \"utbetalinger\": [\n            {\n                \"beløp\": \"1500\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-05-01\",\n                \"tilOgMedDato\": \"2024-05-31\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            },\n            {\n                \"beløp\": \"1200\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-06-01\",\n                \"tilOgMedDato\": \"2024-06-30\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            }\n        ]\n    }\n}\nHer er det verdt å merke seg at iverksettingId ikke trenger å være en UUID. Det kan være en hvilken som helst String med vilkårlig lengde.","eksempel-på-iverksetting-av-ny-månedlig-utbetaling#Eksempel på iverksetting av ny månedlig utbetaling":"Gitt samme sak S-1 og samme behandling B-1 som i forrige eksempel. Her er en iverksetting som viser ny utbetaling for juli:\n{\n    \"sakId\": \"S-1\",\n    \"behandlingId\": \"B-1\",\n    \"iverksettingId\": \"e3c1bc3a-fcfe-4f93-819c-13e8c314ea35\",\n    \"personident\": \"16418245135\",\n    \"vedtak\": {\n        \"vedtakstidspunkt\": \"2024-07-01T15:24:14\",\n        \"saksbehandlerId\": \"S123456\",\n        \"beslutterId\": \"B123456\",\n        \"utbetalinger\": [\n            {\n                \"beløp\": \"1500\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-05-01\",\n                \"tilOgMedDato\": \"2024-05-31\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            },\n            {\n                \"beløp\": \"1200\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-06-01\",\n                \"tilOgMedDato\": \"2024-06-30\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            },\n            {\n                \"beløp\": \"1300\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-07-01\",\n                \"tilOgMedDato\": \"2024-07-31\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            }\n        ]\n    },\n    \"forrigeIverksetting\": {\n        \"behandlingId\": \"B-1\",\n        \"iverksettingId\": \"485c17f5-2e11-49d2-b370-51120fec58d1\"\n    }\n}","eksempel-på-iverksetting-av-revurdering#Eksempel på iverksetting av revurdering":"Gitt samme sak S-1 som i forrige eksempel. I en revurderingsbehandling B-2 endres beløpet for mai. Her er hvordan iverksettingen vil se ut:\n{\n    \"sakId\": \"S-1\",\n    \"behandlingId\": \"B-2\",\n    \"iverksettingId\": \"acb76a9f-2268-4e64-bdbe-b6cb413ac94f\",\n    \"personident\": \"16418245135\",\n    \"vedtak\": {\n        \"vedtakstidspunkt\": \"2024-07-11T15:24:14\",\n        \"saksbehandlerId\": \"S123456\",\n        \"beslutterId\": \"B123456\",\n        \"utbetalinger\": [\n            {\n                \"beløp\": \"2000\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-05-01\",\n                \"tilOgMedDato\": \"2024-05-31\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            },\n            {\n                \"beløp\": \"1200\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-06-01\",\n                \"tilOgMedDato\": \"2024-06-30\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            },\n            {\n                \"beløp\": \"1300\",\n                \"satstype\": \"ENGANGS\",\n                \"fraOgMedDato\": \"2024-07-01\",\n                \"tilOgMedDato\": \"2024-07-31\",\n                \"stønadstype\": \"TILSYN_BARN_AAP\"\n            }\n        ]\n    },\n    \"forrigeIverksetting\": {\n        \"behandlingId\": \"B-1\",\n        \"iverksettingId\": \"e3c1bc3a-fcfe-4f93-819c-13e8c314ea35\"\n    }\n}","meldepliktsytelser#Meldepliktsytelser":"Eksemplene under er for dagpenger, men iverksetting for tiltakspenger vil se lik ut med to unntak: Feltene som sendes i stønadsdata-objektet vil være annerledes, og tiltakspenger må sette brukersNavKontor på vedtaket.","eksempel-på-iverksetting-av-første-meldekortrapportering-i-ny-sak#Eksempel på iverksetting av første meldekort/rapportering i ny sak":"Gitt sak med id S-1 og behandling med id B-1. Her er et eksempel på iverksetting for første utbetaling:\n{\n    \"sakId\": \"S-1\",\n    \"behandlingId\": \"B-1\",\n    \"personident\": \"29926096549\",\n    \"vedtak\": {\n        \"vedtakstidspunkt\": \"2024-06-14T08:24:14\",\n        \"saksbehandlerId\": \"Z999999\",\n        \"beslutterId\": \"Z888888\",\n        \"utbetalinger\": [\n            {\n                \"beløp\": 600,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-05-27\",\n                \"tilOgMedDato\": \"2024-05-31\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            },\n            {\n                \"beløp\": 600,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-06-03\",\n                \"tilOgMedDato\": \"2024-06-07\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            }\n        ]\n    }\n}","eksempel-på-iverksetting-av-neste-meldekortrapportering#Eksempel på iverksetting av neste meldekort/rapportering":"Gitt samme sak S-1 og ny behandling B-2. Her er et eksempel på iverksetting for andre meldekort/rapportering:\n{\n    \"sakId\": \"S-1\",\n    \"behandlingId\": \"B-2\",\n    \"personident\": \"29926096549\",\n    \"vedtak\": {\n        \"vedtakstidspunkt\": \"2024-06-24T08:24:14\",\n        \"saksbehandlerId\": \"Z999999\",\n        \"beslutterId\": \"Z888888\",\n        \"utbetalinger\": [\n            {\n                \"beløp\": 600,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-05-27\",\n                \"tilOgMedDato\": \"2024-05-31\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            },\n            {\n                \"beløp\": 600,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-06-03\",\n                \"tilOgMedDato\": \"2024-06-07\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            },\n            {\n                \"beløp\": 400,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-06-10\",\n                \"tilOgMedDato\": \"2024-06-14\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            },\n            {\n                \"beløp\": 400,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-06-17\",\n                \"tilOgMedDato\": \"2024-06-21\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            }\n        ]\n    },\n    \"forrigeIverksetting\": {\n        \"behandlingId\": \"B-1\"\n    }\n}","eksempel-på-iverksetting-av-revurdering-med-opphør#Eksempel på iverksetting av revurdering med opphør":"Gitt samme sak S-1. I en revurderingsbehandling B-3 skal utbetalingen for første meldekort/rapportering opphøre (feks. fordi bruker har jobbet over terskel). Her er hvordan iverksettingen vil se ut:\n{\n    \"sakId\": \"S-1\",\n    \"behandlingId\": \"B-3\",\n    \"personident\": \"29926096549\",\n    \"vedtak\": {\n        \"vedtakstidspunkt\": \"2024-06-29T08:24:14\",\n        \"saksbehandlerId\": \"Z999999\",\n        \"beslutterId\": \"Z888888\",\n        \"utbetalinger\": [\n            {\n                \"beløp\": 400,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-06-10\",\n                \"tilOgMedDato\": \"2024-06-14\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            },\n            {\n                \"beløp\": 400,\n                \"satstype\": \"DAGLIG\",\n                \"fraOgMedDato\": \"2024-06-17\",\n                \"tilOgMedDato\": \"2024-06-21\",\n                \"stønadsdata\": {\n                    \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n                }\n            }\n        ]\n    },\n    \"forrigeIverksetting\": {\n        \"behandlingId\": \"B-2\"\n    }\n}"}},"/utbetaling/iverksetting":{"title":"Iverksetting","data":{"post-apiiverksetting#POST /api/iverksetting":"Sender en utbetaling til NAVs økonomisystem. Når API-et mottar en utbetaling som skal iverksettes, gjør den noen enkle valideringer\nog svarer med en 202 Accepted dersom valideringene går gjennom. Resten av løypa for å utbetale er helt asynkron og orkestreres\ninternt i Utsjekk. En ok-respons fra API-et betyr altså ikke at utbetalingen er kvittert ok i økonomisystemet, men at\nUtsjekk tar ansvaret for videre håndtering. Bruk status-endepunktet for å sjekke status på utbetalingen.","validering#Validering":"Følgende må være oppfylt for at Utsjekk skal akseptere utbetalingen:Format på utbetaling\nUtbetalingsperiodene må ikke overlappe i tid innenfor samme stønadsundergruppe.\nUtbetalingsperiodene må være gyldige perioder, dvs. at fom-dato på en periode må være før tom-dato.\nTjenesten aksepterer ikke negative utbetalinger\nTilstand\nUtsjekk kan ikke allerede ha en utbetaling med samme behandlingsid og iverksettingsid\nEvt. tidligere utbetaling må tilhøre samme sak\nEvt. tidligere utbetaling på saken må være ferdig iverksatt\nVidere er det noen ytelsesspesifikke valideringer. Ta kontakt med oss dersom din ytelse har spesielle behov.","utbetalinger#Utbetalinger":"Listen av utbetalinger som Utsjekk tar i mot følger dette formatet:\n{\n    \"beløp\": \"uint\",\n    \"satstype\": \"enum\",\n    \"fraOgMed\": \"date\",\n    \"tilOgMed\": \"date\",\n    \"stønadsdata\": {\n        \"stønadstype\": \"enum\",\n        // <ekstra_felter_spesifikke_for_ytelsen>\n    }\n}\nUtbetalingene må altså periodiseres og klienten må fastsette et beløp og satstype perioden. Dersom beløpet eller stønadstypen\nendrer seg må det opprettes ny periode. For utbetalinger med dagsats må det opprettes nye perioder dersom brukeren har dager i perioden uten utbetaling, som f.eks. helg.Eksempler\nEksempel 1: Endring i beløp\nBruker skal ha utbetaling mandag-fredag med 500kr/dag tom onsdag og 400kr/dag fom torsdag. Det representeres med følgende utbetalingsperioder:\n[\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2023-11-13\",\n    \"tilOgMed\": \"2023-11-15\"\n  },\n  {\n    \"beløp\": 400,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2023-11-16\",\n    \"tilOgMed\": \"2023-11-17\"\n  }\n]\nEksempel 2: Utbetaling med samme beløp for en 14-dagers periode\nBruker skal ha 500kr/dag for 14 dager, med unntak av helger. Det representeres med følgende utbetalingsperioder:\n[\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2023-11-13\",\n    \"tilOgMed\": \"2023-11-17\"\n  },\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2023-11-20\",\n    \"tilOgMed\": \"2023-11-24\"\n  }\n]\nMerk at Utsjekk må ha beløp per dag for meldepliktsytelser uavhengig av hvordan vedtaksløsningen representerer utbetalingene\ninternt. Dette kommer av føringer fra NAVs økonomisystem. Dersom din vedtaksløsning feks. representerer utbetalingen som et\ntotalbeløp for en 14-dagers periode, må dere på konsumentsiden fordele dette totalbeløpet på dagsbeløp slik dere ser det hensiktsmessig.","gjeldende-totalbilde-av-utbetalinger-på-saken#Gjeldende totalbilde av utbetalinger på saken":"Listen av utbetalinger som Utsjekk tar i mot skal være det gjeldende totalbildet av utbetalinger for hele saken. Utsjekk håndterer utbetalingene\npå samme måte uavhengig av om vedtaket som iverksettes er en førstegangsutbetaling eller en korrigering: Når Utsjekk beregner hva som skal sendes\ntil utbetalingssystemet, regner den ut forskjellen på totalbildet for det nye vedtaket og totalbildet for det evt. forrige vedtaket som ble iverksatt.Konseptet er illustrert i figuren under for 3 meldekort, der ett meldekort korrigeres (klikk for å åpne i ny fane):\nI denne figuren er D en dag med utbetaling og H er en helgedag uten utbetaling. Rosa farge indikerer en dag med korrigert utbetaling.Under er et eksempel på hvordan dataen for dette totalbildet kan se ut for 7 meldekort som sendes inn og korrigeres (klikk for å åpne i ny fane):\nI det første meldekortet som sendes inn (B-2) er det gjeldende totalbildet utbetaling for uke 1 og 2. For det neste meldekortet som sendes inn (B-3)\ner det gjeldende totalbildet utbetaling for uke 1 og 2 og uke 3 og 4. Dersom vedtaksløsningen vil iverksette en korrigering av utbetalingen for uke 1 og 2 (B-4),\nsender den inn den nye sannheten for uke 1 og 2 og uendret utbetaling for uke 3 og 4. Her er det tre ting å merke seg:\nVed en korrigering skal Utsjekk alltid ha ny gjeldende sannhet, ikke differansen mellom ny og forrige utbetaling.\nUtsjekk vil ikke agere på noe dersom totalbildet er uendret. Hvis totalbildet for deler av utbetalingen er uendret, som uke 3 og 4 over,\nvil det ikke skje noe med denne perioden. Hvis totalbildet for hele saken er uendret, vil ikke Utsjekk sende noe til utbetalingssystemet.\nDersom det har vært utbetaling på saken tidligere, må Utsjekk ha behandlingsid for den forrige behandlingen som ble iverksatt. Behandlingsid-en brukes til å hente ut\ndet forrige totalbildet av utbetalinger på saken, slik at Utsjekk kan utlede om den nye behandlingen er utbetaling for en ny periode eller om det er en korrigering\n(og i så fall hva som skal korrigeres).\nMerk også at korrigeringen av utbetalingen for uke 5-6 (B-6) er et opphør. Ved opphør av utbetaling forventer Utsjekk at det ikke finnes noen utbetalinger\nfor perioden opphøret gjelder for. I dette eksempelet er altså alle utbetalingene for uke 5-6 fjernet fra listen. Dersom man vil iverksette et opphør av alle utbetalinger på saken,\nkan man sende en tom liste av utbetalinger til Utsjekk.","periodisering-av-utbetalinger#Periodisering av utbetalinger":"Utbetalingsperiodene som sendes til utbetalingstjenesten vil bli sendt videre til Økonomisystemet med samme periodisering som utbetalingstjenesten mottar. Økonomisystemet/PO Utbetaling\nhar et ønske om å minimere antall identiske utbetalingsperioder som sendes. Dette illustreres best ved et eksempel. Dersom man vil iverksette en utbetaling for mandag-fredag med likt dagsbeløp og stønadstype,\ner det bedre å sende dette som én periode:\n[\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-12\",\n    \"tilOgMed\": \"2024-02-16\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  }\n]\nHeller enn å sende 5 identiske perioder:\n[\n  {\n    \"beløp\": 500,\n    \"satstype\":\"DAGLIG\",\n    \"fraOgMed\": \"2024-02-12\",\n    \"tilOgMed\": \"2024-02-12\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  },\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-13\",\n    \"tilOgMed\": \"2024-02-13\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  },\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-14\",\n    \"tilOgMed\": \"2024-02-14\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  },\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-15\",\n    \"tilOgMed\": \"2024-02-15\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  },\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-16\",\n    \"tilOgMed\": \"2024-02-16\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  }\n]\nUtbetalingsperioder som sendes på tvers av behandlinger må imidlertid deles opp selv om de er like og ligger back-to-back i tid. Eksempelvis:Dersom man i behandling #1 iverksetter følgende utbetalingsperiode:\n[\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-12\",\n    \"tilOgMed\": \"2024-02-16\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  }\n]\nOg man i behandling #2 vil iverksette flere dager med utbetaling, må dette deles i to:\n[\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-12\",\n    \"tilOgMed\": \"2024-02-16\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  },\n  {\n    \"beløp\": 500,\n    \"satstype\": \"DAGLIG\",\n    \"fraOgMed\": \"2024-02-17\",\n    \"tilOgMed\": \"2024-02-23\",\n    \"stønadsdata\": {\n      \"stønadstype\": \"DAGPENGER_ARBEIDSSØKER_ORDINÆR\"\n    }\n  }\n]\nDersom disse utbetalingene hadde blitt slått sammen til én periode, vil vi ikke klare å utlede hva som er differansen fra totalbildet i forrige utbetaling."}},"/utbetaling/meldepliktsytelser":{"title":"Meldepliktsytelser","data":{}},"/utbetaling/simulering":{"title":"Simulering","data":{"hva-er-simulering#Hva er simulering":"Simulering er en \"dry run\" mot Oppdragssytemet og viser hvordan resultatet av en iverksetting ville blitt.\nSimuleringen kan fortelle om iverksettingen vil være en ny utbetaling, en feilutbetaling eller en etterbetaling. I tillegg vil man få informasjon om\niverksatte utbetalinger fra andre fagområder innenfor samme gruppe (Se avsnitt om oppsett) – for Arena-ytelsene vil man\neksempelvis kunne se om brukeren har utbetalinger i samme tidsrom fra Arena. Man vil også få informasjon om ulike typer trekk for utbetalingen,\neksempelvis skattetrekk.","øyeblikksbilde#Øyeblikksbilde":"Simuleringen er et øyeblikksbilde som hensyntar tilstanden i Oppdragssystemet i det tidspunktet man utfører simuleringen. Dersom man iverksetter utbetalingen\nen stund etter simuleringen, kan tilstanden ha endret seg og resultatet vil derfor kunne bli annerledes.","hvorfor-gjøre-simulering#Hvorfor gjøre simulering":"Typisk gjøres simulering i en saksbehandlingskontekst, ofte for revurderingsbehandlinger. Saksbehandler kan da sjekke om resultatet av iverksettingen vil bli slik\nhen forventer, og om brukeren har evt. andre utbetalinger som vil kunne påvirke beregningen. I noen saksbehandlingsløsninger brukes også simulering for å forutsi og\nevt. varsle bruker om at revurderingen vil trigge en tilbakekrevingsbehandling.","oppsett-for-arena-ytelsene#Oppsett for Arena-ytelsene":"Motregningsgruppe er et subset av ytelser i en faggruppe, men som kan motregnes mot hverandre. Når man simulerer inneholder responsen informasjon om ytelser i samme faggruppe. Eksempel på faggruppe er arbeidsytelser (ARBYT) a.k.a Arena-ytelser.","åpningstid#Åpningstid":"Oppdragssystemet (OS) opererer med åpningstider fra 6 om morgenen til 21 om kvelden, mandag til fredag. OS er også stengt på helligdager.\nOm man prøver å bruke simuleringstjenesten når OS er stengt vil man få en 503-respons.","eksempler#Eksempler":"Tabellen under viser tre behandlinger for perioden februar t.o.m. april\nBehandlinger\tFebruar\tMars\tApril\t18/5\t1000\t1000\t1000\t22/5\t\t800\t\t23/5\t1100\t1100\t1100\t\nFørste behandling sendes inn 18/5 og er på 1000 kr pr måned. Oppsummeringen fra simuleringstjenesten blir seendes slik ut:\nOppsummering\tFebruar\tMars\tApril\ttidligereUtbetalt\t0\t0\t0\tnyUtbetaling\t1000\t1000\t1000\ttotalEtterbetaling\t0\t0\t0\ttotalFeilutbetaling\t0\t0\t0\t\nAndre behandling sendes inn 22/5. Der revurderer man mars og sier at bruker skal få utbetalt 800 kr, ikke 1000 kr som det opprinnelig var:\nOppsummering\tFebruar\tMars\tApril\ttidligereUtbetalt\t1000\t1000\t1000\tnyUtbetaling\t0\t800\t0\ttotalEtterbetaling\t0\t0\t0\ttotalFeilutbetaling\t0\t200\t0\t\nAndre behandling sendes inn 23/5. Der revurderer man alle periodene til 1100 kr pr. måned:\nOppsummering\tFebruar\tMars\tApril\ttidligereUtbetalt\t1000\t800\t1000\tnyUtbetaling\t1100\t1100\t1100\ttotalEtterbetaling\t100\t300\t100\ttotalFeilutbetaling\t0\t0\t0"}}}